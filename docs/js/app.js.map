{"version":3,"file":"app.js","sources":["../../src/app/main.ts"],"sourcesContent":["/* eslint-env browser */\r\n\r\nimport { default as merge } from 'lodash-es/merge';\r\n\r\nimport {\r\n  Account,\r\n  ApiSession,\r\n  Contract,\r\n  File,\r\n  Json,\r\n  KeyType,\r\n  Token,\r\n  TokenTypes,\r\n  Topic,\r\n} from '@buidlerlabs/hedera-strato-js';\r\n\r\nimport {\r\n  HashPackWallet,\r\n} from 'hashconnect-hip-338';\r\n\r\nconst hpAppMetaData = {\r\n  description: \"Hedera Strato Documentation\",\r\n  icon: \"https://www.hashpack.app/img/logo.svg\",\r\n  name: \"hStrato\",\r\n};\r\n\r\nasync function injectStrato() {\r\n  try {\r\n    const docsOperatorResponse = await fetch('https://eu2.contabostorage.com/963797152a304f4bb7f75cc0af884bd7:buidler-labs/projects/hedera-strato-js/docs-operator.json');\r\n    const { value: uint8ArrayDocsOperator } = await docsOperatorResponse.body.getReader().read();\r\n    const rawDocsOperator = new TextDecoder().decode(uint8ArrayDocsOperator);\r\n    const docsOperator = JSON.parse(rawDocsOperator);\r\n    const s3OperatorContext = {\r\n      network: {\r\n        name: docsOperator.network,\r\n      },\r\n      wallet: {\r\n        sdk: {\r\n          operatorId: docsOperator.accountId,\r\n          operatorKey: docsOperator.privateKey,\r\n        },\r\n      },\r\n    };\r\n    const originalApiSessionDefault = ApiSession.default;\r\n\r\n    console.log(`ApiSession will default to using account-id '${docsOperator.accountId}' on network '${docsOperator.network}'.`);\r\n    window[\"ApiSession\"] = {\r\n      default: function (...args) {\r\n        let operatorCoordsProvided = false;\r\n\r\n        if (args.length > 0 && args[0] instanceof Object) {\r\n          if (args[0].wallet !== undefined && args[0].wallet.hedera !== undefined) {\r\n            operatorCoordsProvided = args[0].wallet.sdk.operatorId !== undefined || args[0].wallet.sdk.operatorKey !== undefined;\r\n          }\r\n          operatorCoordsProvided ||= (args[0].network !== undefined && args[0].network.name !== undefined);\r\n        }\r\n\r\n        // eslint-disable-next-line no-undef\r\n        return originalApiSessionDefault(merge(operatorCoordsProvided ? {} : s3OperatorContext, ...args));\r\n      },\r\n      ... ApiSession,\r\n    };\r\n  } catch(e) {\r\n    console.error('There was an error while fetching the docs-client operator. Falling back to the bundled operator.', e);\r\n    window[\"ApiSession\"] = ApiSession;\r\n  } finally {\r\n    window[\"Account\"] = Account;\r\n    window[\"Contract\"] = Contract;\r\n    window[\"File\"] = File;\r\n    window[\"Json\"] = Json;\r\n    window[\"KeyType\"] = KeyType;\r\n    window[\"Token\"] = Token;\r\n    window[\"TokenTypes\"] = TokenTypes;\r\n    window[\"Topic\"] = Topic;\r\n  }\r\n}\r\n\r\n(async function () {\r\n  await injectStrato();\r\n\r\n  window[\"connectWallet\"] = async (networkName) => {\r\n    const wallet = await HashPackWallet.newConnection({\r\n      appMetadata: hpAppMetaData,\r\n      debug: false,\r\n      networkName,\r\n    });\r\n\r\n    setWallet(wallet);\r\n    return wallet;\r\n  };\r\n\r\n  window['disconnectWallet'] = () => {\r\n    if(window['hedera']) {\r\n      window['hedera'].wipePairingData();\r\n      window['hedera'] = null;\r\n    }\r\n  }\r\n\r\n  setWallet(await HashPackWallet.getConnection(false));\r\n})();\r\n\r\nfunction setWallet(wallet) {\r\n  if (wallet) {\r\n    window['hedera'] = wallet;\r\n    window.postMessage(\"WalletLoaded\");\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}