<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Hedera Strato JS - v0.6.10</title><meta name="description" content="Documentation for Hedera Strato JS - v0.6.10"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Hedera Strato JS - v0.6.10</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>Hedera Strato JS - v0.6.10</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#hedera-strato-js" id="hedera-strato-js" style="color: inherit; text-decoration: none;">
  <h1>Hedera Strato JS</h1>
</a>
<p>Write Web3 <a href="https://hedera.com/">Hedera</a> smart-contract dApps frictionless and with ease, without having to deal with the hustle and bustle of <a href="https://docs.hedera.com/guides/docs/sdks">Hedera&#39;s underlying services</a>.</p>
<blockquote>
<p><strong>Disclaimer:</strong> This project is not an official Hedera project and, as such, it is not affiliated with it in any way, shape or form. It is an independent, community driven, effort to bring clarity and <em>joy</em> to developing descentralized apps (dApps) on the Hedera network-chain ecosystem.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> Currently, the library is only available for NodeJS runtime environments but efforts are underway to have it deployable and working in web browsers as well.</p>
</blockquote>
<blockquote>
<p><strong>Note #2:</strong> Please keep in mind that, although core features are tested and working, this is still currently in heavy-active development and, as such, it&#39;s not yet ready for production usage. The API might also change before we reach there!</p>
</blockquote>

<a href="#quick-start-example" id="quick-start-example" style="color: inherit; text-decoration: none;">
  <h2>Quick start example</h2>
</a>
<p>Just clone and follow the the instructions in our <a href="https://github.com/buidler-labs/hsj-example">quick-start demo repo</a>. As described in that readme, you will need a <code>.env</code> file to configure some network parameters. If you&#39;re going to use our <a href="https://github.com/buidler-labs/dockerized-hedera-services">local, dockerized, hedera-node services</a>, just copy-paste <a href=".env.local-customnet">this config</a> and you should be good to go.</p>
<p>If you want a quick flavour of where that will get you, here&#39;s how one might tipically use the library:</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-0">hapiSession</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-2">HederaNetwork</span><span class="hl-1">.</span><span class="hl-6">defaultApiSession</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-0">helloWorldContract</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-2">Contract</span><span class="hl-1">.</span><span class="hl-6">newFrom</span><span class="hl-1">({ </span><span class="hl-2">path:</span><span class="hl-1"> </span><span class="hl-7">&#39;./hello_world.sol&#39;</span><span class="hl-1"> });</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-0">liveContract</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-2">hapiSession</span><span class="hl-1">.</span><span class="hl-6">upload</span><span class="hl-1">(</span><span class="hl-2">helloWorldContract</span><span class="hl-1">);</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-2">liveContract</span><span class="hl-1">.</span><span class="hl-6">greet</span><span class="hl-1">());</span>
</code></pre>
<p>By the way, the above code snippet loads a solidity file, compiles it, uploads it to the network and ends up console-logging the resulting output of calling the <code>greet</code> function/variable of the deployed <code>hello_world.sol</code> contract. It&#39;s that easy!</p>

<a href="#features-walkthrough" id="features-walkthrough" style="color: inherit; text-decoration: none;">
  <h2>Features walkthrough</h2>
</a>
<p>The following is a breakthrough of all the possible cases currently permitted by the library which are 3 broad ones:</p>
<ul>
<li>create/retrieve an api session -&gt; load a contract code -&gt; compile and upload the contract -&gt; interact with the deployed contract</li>
<li>create/retrieve an api session -&gt; retrieve a reference of a previously deployed contract -&gt; interact with the contract</li>
<li>create/retrieve an api session -&gt; upload a JSON object; retrieve a <em>live</em> json data-instance</li>
</ul>

<a href="#creating-an-apisession" id="creating-an-apisession" style="color: inherit; text-decoration: none;">
  <h3>Creating an ApiSession</h3>
</a>
<p>Sessions can be conveniantly created via a call to <code>HederaNetwork.defaultApiSession()</code>. This will, by default, try to look for a file called <code>.env</code> and load some network params from there (please see the <a href=".env.sample"><code>.env.sample</code> file</a> for more info and options). The <a href="classes/HederaNetwork.html#defaultApiSession">full method signature accepts an options argument with 2 extra fields</a>: an <code>env</code> dictionary and/or a <code>path</code> string. Both of them portray obey the same naming as that depicted in the <a href=".env.sample"><code>.env.sample</code> file</a>. Whichever one is provided gets to be used but if both of them are fed in, the <code>env</code> runtime dictionary overwrites the <code>path</code>-loaded parameters. </p>
<p>Each <code>HederaNetwork</code> instance also carries with it a <em>api-session cache</em> which allows for subsequent calls to <code>HederaNetwork.defaultApiSession()</code> to retrieve the same api-session instance instead of creating a new one.</p>

<a href="#loading-contract-code" id="loading-contract-code" style="color: inherit; text-decoration: none;">
  <h3>Loading contract code</h3>
</a>
<p>To load the code of a contract-file/text, there are 2 static-factory methods that one could use:</p>
<ul>
<li><code>Contract.newFrom</code> - given either the <code>path</code> of the <code>.sol</code> file or the actual <code>code</code> of it, retrieves a single <code>Contract</code> instance. If there are multiple contracts defined, by default, the first one is retrieved. This can be overwritten to retrieve either the n-th <code>index</code> contract (by default <code>index=0</code>) or a contract by <code>name</code>.</li>
<li><code>Contract.allFrom</code> - same as <code>Contract.name</code> in all regards except for the fact that it does not take in an <code>index</code> nor a contract <code>name</code> and retrieves an array of all the available contracts.
When bulding a <code>Contract</code> instance, there&#39;s also a <code>ignoreWarnings</code> property which is, by default, set to <code>false</code> that allows to bypass solidity&#39;s warnings when building the contract&#39;s code.</li>
</ul>
<p>A thing to keep in mind here is the fact that, once a <code>Contract</code> instance has been constructed, this is also a guarantee that the provided code was accepted by the solidity compiler. This is the reason why <code>Contract</code>s have <code>byteCode</code> property defined on it.</p>

<a href="#deploying-contracts" id="deploying-contracts" style="color: inherit; text-decoration: none;">
  <h3>Deploying contracts</h3>
</a>
<p>Once an <code>ApiSession</code> and a <code>Contract</code> is available, deploying the code on the network is as simple as doing an <code>session.upload(contract)</code> method call. This returns a <code>Promise&lt;LiveContract&gt;</code> so you might want <em>await</em>-ing for the result.</p>

<a href="#transaction-meta-arguments" id="transaction-meta-arguments" style="color: inherit; text-decoration: none;">
  <h4>Transaction meta-arguments</h4>
</a>
<p>Going into more depth with this method, if one wants to tweak the <a href="https://docs.hedera.com/guides/docs/sdks/file-storage/create-a-file">Hedera File Service - Create File Transaction</a> step with extra-arguments, just pass in a second param to the <code>upload</code> call which is a object of the form <code>{_file: {...}}</code> containing any required options. For example, to attach a &quot;Hello Strato&quot; memo to the uploaded contract code, the resulting call would end up being: <code>session.upload(contract, {_file: {fileMemo: &quot;Hello Strato&quot;}})</code>. </p>
<p>To pass <a href="https://docs.hedera.com/guides/docs/sdks/smart-contracts/create-a-smart-contract">Create Smart Contract Transaction</a>
parameters, have the second parameter contain a property called <code>_contract</code> with the same rationale in mind: set values that you wish to send to the <code>ContractCreateTransaction</code> constructor. For instance, if you would like to set a <code>gas</code> contract-creation limit to 100000 hbar, your end <code>upload</code> call would be: <code>session.upload(contract, {_contract: {gas: 100_000}})</code>. By the way, the default <code>gas</code> set for contract-creation transaction is <code>69_000</code>.</p>
<p>You can, of course, pass in both <code>_file</code> and <code>_contract</code> options. Merging the above 2 examples, <code>session.upload(contract, {_contract: {gas: 100_000}, _file: {fileMemo: &quot;Hello Strato&quot;}})</code> would end up uploading a <code>Contract.byteCode</code> to Hedera and have a memo attached to the resulting file called &quot;Hello Strato&quot;. It would then set a <code>gas</code> limit of 100000 hbar to create the contract.</p>

<a href="#constructor-parameters" id="constructor-parameters" style="color: inherit; text-decoration: none;">
  <h4>Constructor parameters</h4>
</a>
<p>Passing in constructor parameters is easy, just add them when <code>ApiSession.upload</code>-ing like so: <code>session.upload(contract, arg1, arg2, ... argn)</code>. If you&#39;re going to have meta-arguments (see above) as well as constructor-args passed in, add the meta-args object first and then add whatever constructor arguments are desired.</p>
<p>Example: <code>session.upload(contract, {_contract: {gas: 100_000}}, &quot;This is a string&quot;)</code> - uploads a <code>contract</code> with a <code>gas</code> create-contract transaction set to 100000 hbar and calling the <code>contract</code>&#39;s constructor passing in the string &quot;This is a string&quot;.</p>

<a href="#interacting-with-deployed-contracts" id="interacting-with-deployed-contracts" style="color: inherit; text-decoration: none;">
  <h3>Interacting with deployed contracts</h3>
</a>

<a href="#calling-methods" id="calling-methods" style="color: inherit; text-decoration: none;">
  <h4>Calling methods</h4>
</a>
<p>Following a succesfull deployment, <em>await</em>-ing a <code>ApiSession.upload</code> call returns a <code>LiveContract</code> instance which has the solidity&#39;s contract functions dinamically attached to it and available for calling. This means that if a contract <code>A</code> has a method <code>foo</code> on it, the resulting <code>LiveContract</code> will also have a function <code>foo</code> defined on it.</p>
<p>So if, for example, we were to upload <a href="https://solidity-by-example.org/">solidity-by-example</a>&#39;s <a href="https://solidity-by-example.org/first-app/">First App</a> Contract via a <code>session.upload</code> call, that will eventually resolve to a <code>LiveContract</code> instance which would have a <code>get</code>, an <code>inc</code> and a <code>dec</code> <a href="https://github.com/buidler-labs/hedera-strato-js/blob/90bc1075892844bc46bf6e3fd191817622ee675d/test/LiveContract.spec.ts#L87">defined on it as one might expect</a>.</p>
<p>Of course, function arguments are also supported so if we have such a live-contract function (<a href="https://solidity-by-example.org/state-variables/">solidity-by-example&#39;s State Variable</a> code, <a href="https://github.com/buidler-labs/hedera-strato-js/blob/90bc1075892844bc46bf6e3fd191817622ee675d/test/LiveContract.spec.ts#L111">for instance</a>), you can call into these methods, passing in the expected values as expected.</p>
<p><code>Note:</code> When dealing with <em>big numbers</em>, the library uses the same one as Hedera SDK does: <a href="https://github.com/MikeMcl/bignumber.js/">bignumber.js</a> . This is intentional since one of the core design principles of it&#39;s API is to try to mimic as close as possible Hedera&#39;s own SDK return types.</p>

<a href="#dealing-with-events" id="dealing-with-events" style="color: inherit; text-decoration: none;">
  <h4>Dealing with events</h4>
</a>
<p>Contract <em>events</em> are propagated upwards from <code>LiveContract</code> through the inherited <code>EventEmitter</code> methods. As such one can <em>listen</em> to an event by simply calling a <code>.on(&quot;event_name&quot;, () =&gt; { ... })</code> on the live-contract instance. Our test cases include <a href="https://solidity-by-example.org/events/">solidity-by-example&#39;s Events code</a> to make sure this works. <a href="https://github.com/buidler-labs/hedera-strato-js/blob/90bc1075892844bc46bf6e3fd191817622ee675d/test/LiveContract.spec.ts#L158">Have a look for yourself</a> if interested.</p>

<a href="#transaction-meta-arguments-1" id="transaction-meta-arguments-1" style="color: inherit; text-decoration: none;">
  <h4>Transaction meta-arguments</h4>
</a>
<p>Similar to when uploading a <em>Smart Contract</em>, calling any of its methods follows the same meta-arguments passing logic: if the first argument is a JS object which has certain properties of interest, those properties are unpacked and used inside the transaction. One such property is the <code>maxQueryPayment</code> which makes for a good example: lets say that we would like to set a maximum query payment of 2 hbar for calling the <a href="https://solidity-by-example.org/state-variables/">solidity-by-example&#39;s State Variable &gt; get method</a>. In this case, you would simply do a <code>liveContract.get({maxQueryPayment: new HBar(2)})</code> and it would suffice.</p>
<p>Of course, similar to the &quot;upload contract operation&quot; detailed above, any argument following the the meta-arguments object would be passed to the method itself. In this regards, using the same <em>State Variable</em> contract, doing a <code>liveContract.set({maxTransactionFee: new HBar(2)}, 42)</code> would call the <code>set</code> method passing in integer <code>42</code> as parameter and setting the <code>maxTransactionFee</code> for the transaction to 2 hbar.</p>

<a href="#retrieving-deployed-contracts" id="retrieving-deployed-contracts" style="color: inherit; text-decoration: none;">
  <h3>Retrieving deployed contracts</h3>
</a>
<p>Uploading a <code>Contract</code> is not the only way to get a hold on a deployed, <code>LiveContract</code> instance. <code>ApiSession</code> also exposes a <code>getLiveContract</code> method which takes in a <code>ContractId</code> as it&#39;s <code>id</code> object param and the contract&#39;s ABI as its <code>abi</code> parameter to lock onto a deployed version of that code on the network. </p>
<p>Want to find out more? <a href="https://github.com/buidler-labs/hedera-strato-js/blob/90bc1075892844bc46bf6e3fd191817622ee675d/test/LiveContract.spec.ts#L31">Have a look at our test-case</a> for an example on how one might go about doing just that.</p>

<a href="#uploading-json-data" id="uploading-json-data" style="color: inherit; text-decoration: none;">
  <h3>Uploading JSON data</h3>
</a>
<p><code>Contract</code> are not the only thing that you can upload to Hedera. We also support pushing JSON entities through <code>ApiSession</code>s overloaded <code>upload</code> method. </p>
<p>Let&#39;s say you have the following object that you want to persist to Hedera: <code>{a: 1, {b: &quot;d&quot;}}</code>. To do that, you would only have to do a <code>session.upload({a: 1, {b: &quot;d&quot;}})</code> (a less verbose form for <code>session.upload(new Json({a: 1, {b: &quot;d&quot;}}))</code>). This would result for an eventual return of a <code>LiveJson</code> object that is a generic object which exposes the underlying JSON.</p>
<p><code>Note:</code> That uploading Jsons allow for the same meta-arguments transaction parameters to be provided as with <em>uploading a contract</em> (please see the above discussion).</p>

<a href="#retrieving-the-json-data" id="retrieving-the-json-data" style="color: inherit; text-decoration: none;">
  <h3>Retrieving the JSON data</h3>
</a>
<p>Of course, storing a Json wouldn&#39;t be that helpful unless someone might be able to retrieve it at some later moment in the future. That&#39;s done through the <code>session.getLiveJson</code> method call. You only need the <code>LiveJson.id</code> to pass in as the <code>id</code> object parameter.</p>
<p><a href="https://github.com/buidler-labs/hedera-strato-js/blob/90bc1075892844bc46bf6e3fd191817622ee675d/test/LiveJson.spec.ts#L33">This test-case</a> shows how this can be done.</p>

<a href="#features-summary" id="features-summary" style="color: inherit; text-decoration: none;">
  <h2>Features summary</h2>
</a>
<ul>
<li>Upload a <a href="https://docs.soliditylang.org/en/v0.8.10/index.html">Solidity Contract</a> (either by <em>code</em> or by <em>path</em>) to Hedera and directly interact with it in JS (via <a href="https://github.com/buidler-labs/hedera-strato-js/blob/main/lib/live/LiveContract.ts"><em>LiveContracts</em></a>)</li>
<li>Given a <a href="https://docs.hedera.com/guides/docs/hedera-api/basic-types/contractid">ContractId</a> and its ABI, retrieve a live-instance of a contract and interact with it</li>
<li>Upload a JSON object to <a href="https://docs.hedera.com/guides/docs/sdks/file-storage">Hedera File Services</a> allowing for later retrieval</li>
</ul>

<a href="#testing-it" id="testing-it" style="color: inherit; text-decoration: none;">
  <h2>Testing it</h2>
</a>
<p>Have the <code>.env</code> file ready (see above) and run </p>
<pre><code><span class="hl-2">$</span><span class="hl-1"> </span><span class="hl-2">npm</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code></pre>
<blockquote>
<p><strong>Note:</strong> If you&#39;re targeting an official network such as a <code>testnet</code> or a <code>previewnet</code>, there will be a cost involved in running the library tests that has to do with API usage regarding contract deployments and execution (among other things). There&#39;s also the option of a <code>customnet</code> targeting a self-hosted <code>hedera-service</code> deployment. If you want to go down that path (recommended especially if you are planning to contribute), please <a href="https://github.com/buidler-labs/dockerized-hedera-services">follow these instructions</a>.</p>
</blockquote>

<a href="#roadmap" id="roadmap" style="color: inherit; text-decoration: none;">
  <h2>Roadmap</h2>
</a>
<ul>
<li>ESM library support to allow browser embedding</li>
<li>Add library logs support</li>
<li>Add better compiler output support</li>
<li>... others</li>
</ul>

<a href="#contributions" id="contributions" style="color: inherit; text-decoration: none;">
  <h2>Contributions</h2>
</a>
<p>Of course, contributions are more then welcomed and encouraged on all fronts: open an issue, update the docs or, if you feel bold enough, directly open a PR and make your case as to why your changes would benefit the library.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p>This work has been published under the MIT License.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/ApiSession.html" class="tsd-kind-icon">Api<wbr/>Session</a></li><li class="tsd-kind-class"><a href="classes/Contract.html" class="tsd-kind-icon">Contract</a></li><li class="tsd-kind-class"><a href="classes/HederaNetwork.html" class="tsd-kind-icon">Hedera<wbr/>Network</a></li><li class="tsd-kind-class"><a href="classes/Json.html" class="tsd-kind-icon">Json</a></li><li class="tsd-kind-class"><a href="classes/LiveContract.html" class="tsd-kind-icon">Live<wbr/>Contract</a></li><li class="tsd-kind-class"><a href="classes/LiveContractCreationError.html" class="tsd-kind-icon">Live<wbr/>Contract<wbr/>Creation<wbr/>Error</a></li><li class="tsd-kind-class"><a href="classes/LiveContractExecutionError.html" class="tsd-kind-icon">Live<wbr/>Contract<wbr/>Execution<wbr/>Error</a></li><li class="tsd-kind-class"><a href="classes/LiveJson.html" class="tsd-kind-icon">Live<wbr/>Json</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#ContractMethod" class="tsd-kind-icon">Contract<wbr/>Method</a></li><li class="tsd-kind-variable"><a href="modules.html#DEFAULT_GAS_PER_CONTRACT_TRANSACTION" class="tsd-kind-icon">DEFAULT_<wbr/>GAS_<wbr/>PER_<wbr/>CONTRACT_<wbr/>TRANSACTION</a></li><li class="tsd-kind-variable"><a href="modules.html#HEDERA_CUSTOM_NET_NAME" class="tsd-kind-icon">HEDERA_<wbr/>CUSTOM_<wbr/>NET_<wbr/>NAME</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>